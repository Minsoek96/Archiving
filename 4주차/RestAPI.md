# RestAPI

***

> REST API는 웹 서비스 간에 데이터를 송수신하기 위한 아키텍처 스타일  
> RESTful은 이러한 스타일을 따르는 API를 지칭한다.

## Uniform Interface

***

`Uniform interface`원칙에 따르면, 클라이언트가 서버와 상호작용할 때 사용하는 메소드, 표현방식, 메시지 구조 등이 일관되어야 한다. 이러한 원칙들은 API의 설계를 단순화 하고, 서버와 클라이언트가 각각 독립적으로 발전할 수 있다.

### URI 자원 식별

각 리소스는 요청에서 유일하게 식별 가능한 URI를 통해 식별되어야 한다.  
example.com/users/123 는 특정 사용자를 식별하는 URI  

### 표현을 통한 자원조작(HTTP 메서드를 사용)

HTTP Method를 통해 자원을 조회, 삭제 등 작업을 설명할 수 있는 정보가 담겨야 하는 것을 말한다.

### Self-descriptive Messages

HTTP Header에 타입을 명시하고 각 메시지(자원)들을 MIME types에 맞춰 표현되어야 한다. 예를 들어 `json`을 반환한다면 `apllication/json`으로 명시해주어야 한다.\
MIME type은 문서, 파일 등의 특성과 형식을 나타내는 표준이다.\
`font/ttf`,`test/plain`,`text/csv`등을 말한다.

### HATEOAS 구조

하이퍼링크에 따라 다른 페이지를 보여줘야 하며 데이터마다 어떤 URL에서 원했는지 명시 해주어야 하는 것을 말한다.\
보통은 href,link,url 속성 중 하나에 해당 데이터의 URI을 담아서 표기해야 한다.\
(\_links 속성에 담기도 한다. 링크를 유추할 수 있는 변수명을 쓰면 된다.)

## Stateless

***

각 요청은 독립적이며, 이전 요청의 상태에 의존하지 않는다.\
즉, 서버는 클라이언트의 상태를 저장하지 않는 것을 의미한다.

## Chacheable

***

HTTP는 원래 캐싱이 된다. 아무런 로직을 구현하지 않더라도 자동적으로 캐싱이 된다.\
새로고침 하면 304가 뜨면서 원래 있던 js와 css이미지 등을 불러오는 것을 볼 수 있다.\
이는 HTTP 메서드 중 GET에 한정되며 `Cache-Control:max-age=100` 이런 식으로 한정된 시간을 정할 수가 있으며 캐싱된 데이터가 유효한지를 판단하기 위해 `Last-modified` 와 `Etag` 라는 헤더값을 쓴다.\
`Etag` 전달되는 값에 태그를 붙여서 캐싱되는 자원인지를 확인해주는 것이다.

## Client-Server 구조

***

클라이언트와 서버가 서로 독립적인 구조를 가져야 한다.\
서버는 그저 API를 제공하고 그 API에 맞는 비즈니스 로직을 처리하면 된다.\
마찬가지로 클라이언트에서는 HTTP로 받는 로직만 잘 처리하면 되는 것이다.

## Layerd System

***

계층구조로 나눠져 있는 아키텍처를 뜻한다. WEB기반 서비스를 하면 보통 이러한 시스템을 구축하게 된다.

## REST API의 URI 규칙

***

자원을 표기하는 URI의 아래의 6가지 규칙을 적용해야 한다.

1. 동작은 HTTP 메소드로만 해야 하고 urI에 해당 내용이 들어가면 안된다.
   1. 수정 = put, 삭제 = delete, 추가 = post, 조회 = get을 이용해야한다.
   2. /books/delete/1 이렇게 표기하면 안된다.
2. .jpg .png 등 확장자는 표시 하지 말아야 한다.
3. 동사가 아닌 명사로만 표기해야 한다. 유저가 책을 소유한다라는 것을 표현한다면
   1. ‘유저/유저아이디/inclusion/책/책아이디’로 표현하고
   2. /geAllUser식의 동사를 집어 넣으면 안된다.
4. 계층적인 내용을 담고 있어야 한다./집/아파트/전세 이런 식으로 내려가야한다.
5. 대문자가 아닌 소문자로만 쓰며 너무 길 경우 -를 쓴다.
6. HTTP 응답 상태 코드를 적재적소에 활용한다.

```jsx
app.get('/books/')
// 모든 책을 조회한다.
app.post('/books/:booksid')
// 책을 생성한다.
app.put('/books/:booksid')
// 책을 수정한다.
app.get('/books/:booksid')
// 책을 조회한다.
app.put('/users/:userid/books/:booksid');
// 어떤 유저가 특정 책을 빌린다.
app.patch('/users/:userid/books/:booksid');
// 어떤 유저가 특정 책을 빌린다.
```

## HTTP Method(CRUD)

***

클라이언트가 서버에 요청을 보내는 방법을 정의

CRUD는 Create(생성), Read(읽기), Update(갱신), Delete(삭제)의 약자로, 데이터 관리의 네 가지 기본 기능을 나타낸다.

1. **Create (생성)**:
   * **POST**: 서버에 리소스를 생성하라는 요청을 보낸다
   * 새 게시물을 만들거나 사용자 정보를 서버에 추가할 때 사용된다.
2. **Read (읽기)**:
   * **GET**: 서버로부터 리소스를 검색하라는 요청을 보낸다.
   * 데이터를 조회할 때 사용되며, 데이터를 변경하지 않는 안전한(read-only) 작업에 사용된다.
3. **Update (갱신)**:
   * **PUT**: 서버에 리소스를 갱신하라는 요청
   * 기존 리소스를 새로운 데이터로 완전히 대체한다.
   * **PATCH**: PUT과 유사하지만, 리소스의 일부분만 갱신하라는 요청
   * 즉, 전체 리소스를 대체하는 대신 일부분만 수정한다.
4. **Delete (삭제)**:
   * **DELETE**: 서버에 리소스를 삭제하라는 요청
   * 지정된 리소스를 제거한다.
