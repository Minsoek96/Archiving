# 가까이 컴퓨터끼리 어떻게 데이터를 주고 받을까?

2계층은 동일한 네트워크 상에 있는 장치들 간에 데이터를 주고 받는 역할을 수행한다. 데이터를 주고 받을 장비와 보낼 장비를 명확하게 구분하고, 신뢰성 있는 데이터 전송을 위해 오류 제어나 흐름 제어를 담당한다.

- 오류 제어 : 전송 과정에서 발생할 수 있는 오류를 감지하고 수정하는 기능을 제공 
- 흐름 제어 : 데이터 전송 속도를 조절하여 송신지와 수신자가 데이터 처리 능력 차이로 인해 과부하가 발생하지 않도록 관리.


## 2계층에서 사용하는 주소 MAC

MAC(Media Access Control) 주소는 네트워크 상에서 각 장치를 식별하기 위한 고유한 주소이다. 전세계적으로 유일한 주소이다.

- OUI : IEEE에서 부여하는 일종의 제조회사 식별 ID
- NIC  : 제조사에서 부여한 고유번호

### 2계층과 3계층 차이 

2계층은 동일한 네트워크 내에서 데이터를 전송하는 역할을 하지만, **다른 네트워크 대역으로 데이터를 전송할 떄는** 3계층(네트워크 계층)이 관여한다. 3계층에서 **IP주소**를 통해 라우팅을 하며, 데이터가 목적지까지 올바르게 전달되도록 경로를 관리한다.

## 2계층 프로토콜 

2계층에서 가장 널리 사용되는 프로토콜 중 하나가 `Ethernet` 프로토콜이다. 이더넷은 네트워크 상에서 데이터를 프레임으로 캡슐화하여 전송하는 표준 방식이다.  
Ethernet 프레임은 14바이트의 헤더로 시작

![ethernet](/dev/network/ethernet_p.png)

1. 목적지 MAC 주소 (Destination MAC Address) - 6 바이트
    - 데이터를 받는 상대방 시스템의 MAC 주소
    - 이 필드를 통해 Etherent 프레임이 정확한 수신자에게 전달된다.

2. 출발지 MAC 주소 (Source MAC Address) - 6 바이트
    - 데이터를 보내는 시스템의 MAC 주소이다.
    - 이 필드는 수신자가 데이터를 수신한 후 송신자에게 응답할 때 사용될 수 있다.

3. 상위 프로토콜 (Type/Length) - 2 바이트
    - 프레임에 담긴 상위 계층 프로토콜의 타입을 지정한다. 이를 통해 이더넷 프레임이 어떤 프로토콜로 전달될지 결정된다.
    - IPv4 : 0x0800 이더넷 프레임이 IPv4 패킷을 포함
    - ARP : 0x0806 Address Resolution Protcol(ARP) 메시지를 포함하고 있음
    - IPv6 : 0x86DD IPv6 패킷을 포함하고 있음을 나타낸다.


### Ethernet 프레임의 전송 흐름

출발지 장비는 목적지 MAC 주소를 확인하고 Ethernet 프레임을 생성한다.
프레임이 네트워크 상에 전송되면, 목적지 MAC 주소를 확인한 수신 장치가 해당 프레임을 받아 처리한다.
수신 장치는 상위 프로토콜 타입 필드를 통해 어떤 프로토콜로 프레임의 데이터를 처리할지 결정한다 (예: IPv4, ARP)