# JSX

JSXëŠ” XMLì™€ ìœ ì‚¬í•œ ìë°”ìŠ¤í¬ë¦½íŠ¸ í™•ì¥ë¬¸ë²•ìœ¼ë¡œ\
ì»´í¬ë„ŒíŠ¸ UIë¥¼ ìƒì„±í•˜ëŠ”ë° ë„ì›€ì„ ì¤€ë‹¤.

* JSXëŠ” XMLì²˜ëŸ¼ ì‘ì„±ëœ ë¶€ë¶„ì„ `React.createElement`ì„ ì“°ëŠ” JavaScriptì½”ë“œë¡œ ë³€í™˜í•œë‹¤.
* ì¤‘ê´„í˜¸ë¥¼ ì¨ì„œ JavaScript ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì“¸ ìˆ˜ ìˆê³ , ê²°êµ­ì€ JavaScriptì½”ë“œì™€ 1:1ë¡œ ë§¤ì¹­ëœë‹¤.

## SynctaticSugar

***

ì´í•´ í•˜ê³  í‘œí˜„í•˜ê¸° ì‰½ê²Œ ë””ìì¸ëœ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ ë¬¸ë²•

* ë” ì§ê´€ì ì´ê³  ê°„ê²°í•œ ë°©ì‹ìœ¼ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.

## React.createElement

***

`createElement`ë¥¼ ì‚¬ìš©í•˜ë©´ `React element`íŠ¸ë¦¬ì— ë…¸ë“œë¥¼ ì¶”ê°€ í•  ìˆ˜ ìˆë‹¤.

```jsx
createElement(type, props, ...children);
```

### íŠ¹ì§•

`JSX`ëŠ” `React.createElement()`í•¨ìˆ˜ì— ëŒ€í•œ ë¬¸ë²•ì  ì„¤íƒ•ì´ë‹¤.\
íŠ¸ëœìŠ¤íŒŒì¼ëŸ¬ë¥¼ ì´ìš©í•˜ë©´ :\
`JSX` â†’ `React.createElement()`í•¨ìˆ˜ë¡œ ë³€í™˜ëœë‹¤.

### Parameters

**type**: `type`ì˜ ì¸ìëŠ” íƒœê·¸ ì´ë¦„ ë¬¸ìì—´(`div`, `span`)ë“± ë˜ëŠ” Reactì»´í¬ë„ŒíŠ¸(í•¨ìˆ˜, í´ë˜ìŠ¤ ë˜ëŠ” `Fragment`)\
**props**: `props`ì¸ìëŠ” ê°ì²´ì´ê±°ë‚˜ nullì´ì–´ì•¼ í•œë‹¤.\
**...children?**: 0ê°œ ì´ìƒì˜ ìì‹ ë…¸ë“œ

[Babel](https://babeljs.io/repl) ë¡œ í™•ì¸ ê°€ëŠ¥

> â†’ â€œPresetsâ€ì—ì„œ â€œreactâ€ë¥¼ ì²´í¬í•˜ê±°ë‚˜, â€œPluginsâ€ì—ì„œ â€œ@babel/plugin-transform-react-jsxâ€ë¥¼ ì¶”ê°€í•˜ë©´ JSXë¥¼ ì‹¤í—˜í•  ìˆ˜ ìˆë‹¤.

JSX

```jsx
<div>test</div>
```

ë³€í™˜ëœ JSì½”ë“œ

```jsx
React.createElement("div", null, "test");
```

JSX

```jsx
<div type="test">test</div>
```

ë³€í™˜ëœ JSì½”ë“œ

```jsx
React.createElement("div", { type: "test" }, "test");
```

JSX

```jsx
<div>
  <p>test</p>
</div>
```

ë³€í™˜ëœ JSì½”ë“œ

```jsx
React.createElement("div", null, React.createElement("p", null, "test"));
```

JSX

```jsx
<div>
  <p>test</p>
  <p>test2</p>
</div>
```

ë³€í™˜ëœ JSì½”ë“œ

```jsx
React.createElement(
  "div",
  null,
  React.createElement("p", null, "test"),
  React.createElement("p", null, "test2")
);
```

JSX

```jsx
const App = (pageName) => <div>{pageName}</div>;
<App pageName={"App"} />;
```

ë³€í™˜ëœ JSì½”ë“œ

```jsx
const App = (pageName) => React.createElement("div",null,pageName)
React.createElement(App,{pageName="App"});
```

> ğŸ’¡JSX íŒŒì¼ /\_ @jsx ì–´ì©Œê³  \_/ ì£¼ì„ì„ ì¶”ê°€í•˜ë©´ React.createElement ëŒ€ì‹  â€œ ì–´ì©Œê³ â€ë¥¼ ì“°ê²Œëœë‹¤.

## React Element

***

Reactì—ì„œ UIë¥¼ êµ¬ì„±í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ë‹¨ìœ„\
React í™”ë©´ì— ë¬´ì—‡ì´ í‘œì‹œë ì§€ ì„¤ëª…í•˜ëŠ” ê°ì²´

### íŠ¹ì´ì‚¬í•­

**ë¶ˆë³€ì„±** : í•œë²ˆ ìƒì„±ëœ elementëŠ” ì†ì„±ì„ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤.\
â†’ìƒˆë¡œìš´ elementë¥¼ ìƒì„±í•˜ê³  ê°±ì‹  ìš”ì²­ í•´ì•¼í•¨\
**ê°€ìƒDOM** : Reactì˜ ìš”ì†ŒëŠ” ì‹¤ì œ DOMìš”ì†Œê°€ ì•„ë‹ˆë¼ ê°€ìƒDOMì˜ ì¼ë¶€ì´ë‹¤.

**ìƒì„±ë°©ë²•** : `React.createElement()` , `JSX`

## jsx-runtime(New JSX Transform)

***

React17 ì´ì „ ë²„ì „ì—ì„œëŠ” React ì»´í¬ë„ŒíŠ¸ë¥¼ ì»´íŒŒì¼í•  ë•Œ `React.createElement` ë¥¼ í˜¸ì¶œ í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ëª¨ë“  JSXíŒŒì¼ ìƒë‹¨ì— import React from â€˜reactâ€™ êµ¬ë¬¸ì´ í•„ìš”í–ˆë‹¤.\
í•˜ì§€ë§Œ React17ì´í›„ Reactì™€ Babelì´ `jsx-runtime` ì´ë¼ëŠ” ìƒˆë¡œìš´ íŒ¨í‚¤ì§€ë¥¼ ë„ì…í–ˆë‹¤. JSXì½”ë“œê°€ `jsx`ë˜ëŠ” `jsxs` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ `React.createElement`ì˜ í˜¸ì¶œ ì—†ì´ ì§ì ‘ ë³€í™˜ëœë‹¤. ë”ì´ìƒ Reactë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ í•„ìš”ê°€ ì—†ê²Œ ë˜ì—ˆë‹¤.

> ëª¨ë“  íŒŒì¼ì— Reactë¥¼ ì„í¬íŠ¸ í•  í•„ìš” ì—†ì–´ì¡Œë‹¤.\
> í•„ìš”í•œ ê¸°ëŠ¥ë§Œ ì„í¬íŠ¸í•˜ì—¬ ìµœì¢… ë²ˆë“¤ì˜ í¬ê¸°ê°€ ì¤„ì–´ë“¤ì—ˆë‹¤.\
> ìƒˆë¡œìš´ JSXë³€í™˜ì€ ëŸ°íƒ€ì„ ì„±ëŠ¥ì„ ì¡°ê¸ˆì´ë‚˜ë§ˆ í–¥ìƒì‹œì¼°ë‹¤.

## React StrictMode

***

ë¦¬ì•¡íŠ¸ ë‚´ì˜ ì ì¬ì ì¸ ë¬¸ì œë¥¼ ì•Œì•„ë‚´ê¸° ìœ„í•œ ë„êµ¬ì´ë‹¤.\
`Fragement` ì™€ ê°™ì´ UIë¥¼ ë Œë”ë§í•˜ì§€ ì•Šìœ¼ë©°, ìì‹ë“¤ì— ëŒ€í•œ ë¶€ê°€ì ì¸ ê²€ì‚¬ì™€ ê²½ê³ ë¥¼ í™œì„±í™”í•œë‹¤.

> ğŸ’¡Strictëª¨ë“œëŠ” ê°œë°œëª¨ë“œì—ì„œë§Œ í™œì„±í™” ëœë‹¤.\
> ì—ìƒì¹˜ ëª»í•œ ì‚¬ì´ë“œ ì´í™íŠ¸ë¥¼ ê°ì§€í•˜ê¸° ìœ„í•´ ì˜ë„ì ìœ¼ë¡œ ì´ì¤‘ìœ¼ë¡œ í˜¸ì¶œí•œë‹¤.

## Virtual DOM(DOMë³µì‚¬ë³¸)

***

Virtual DOMì€ UIë¥¼ DOMì„ ì¶”ìƒí™”í•œ javaScriptê°ì²´ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ê³ \
ì‹¤ì œ DOMì™€ ë™ê¸°í™”í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ê°œë…

## DOM

***

`HTML`, `XML`ë¬¸ì„œì˜ í”„ë¡œê·¸ë˜ë° `interface`ì´ë‹¤. DOMì€ ë¬¸ì„œì˜ êµ¬ì¡°í™”ëœ í‘œí˜„ì„ ì œê³µí•˜ë©° í”„ë¡œê·¸ë˜ë° ì–¸ì–´ê°€ DOMêµ¬ì¡°ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œê³µí•˜ì—¬ ë¬¸ì„œë¥¼ ì½ê³ , ë³€ê²½í•  ìˆ˜ ìˆê²Œ ë•ëŠ”ë‹¤. DOMì€ `nodes`ì™€ `objet`ë¡œ ë¬¸ì„œë¥¼ í‘œí˜„í•œë‹¤.

## ë¸Œë¼ìš°ì € ë Œë”ë§ ê³¼ì •

1. HTMLë¬¸ì„œë¥¼ íŒŒì‹±í•œë‹¤.
2. DOMíŠ¸ë¦¬ë¥¼ ìƒì„±í•œë‹¤.
3. CSSOMíŠ¸ë¦¬ë¥¼ ìƒì„±í•œë‹¤.
4. RenderíŠ¸ë¦¬ë¥¼ ìƒì„±í•œë‹¤.
5. Layout ë‹¨ê³„ ( ìŠ¤íƒ€ì¼ ìš”ì†Œì˜ ì¢Œí‘œë¥¼ ì„¤ì •í•˜ëŠ” ë‹¨ê³„ )
6. Paint ë‹¨ê³„ ( ìŠ¤íƒ€ì¼ ìš”ì†Œë¥¼ ê·¸ë¦¬ëŠ” ë‹¨ê³„ )
7. Compose (Paintë¥¼ ìŒ“ì•„ í•©ì¹˜ëŠ” ë‹¨ê³„)

### íŠ¸ë¦¬ ìì‹ ë…¸ë“œì— ë³€í™”ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°

ì „ì²´ì˜ íŠ¸ë¦¬ë¥¼ ë‹¤ì‹œ ê·¸ë¦¬ëŠ”ê²Œ ì•„ë‹ˆë¼ ë³€í™”ê°€ ì¼ì–´ë‚œ í•´ë‹¹ ë…¸ë“œì™€ ê´€ë ¨ëœ íŠ¸ë¦¬ ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸ í•œë‹¤.

1.  DOMì¡°ì‘ (DOM Manipulation)

    > DOMíŠ¸ë¦¬ì— ë³€í™”ë¥¼ ì£¼ê±°ë‚˜ ìƒˆ ìš”ì†Œë¥¼ ì¶”ê°€, ë³€ê²½ ë“±ì˜ ë™ì‘ì„ ìˆ˜í–‰\
    > EX:) `document.createElement`, `appendChild`, `removeChild`, `innerHTML` ë“±
2.  DOMíŠ¸ë¦¬ ì—…ë°ì´íŠ¸ (Update DOM Tree)

    > ë³€ê²½ëœ ë¶€ë¶„ì€ ë¸Œë¼ìš°ì €ì—ì„œ ê°ì§€ëœë‹¤.\
    > ë³€ê²½ ë‚´ìš©ì€ DOMíŠ¸ë¦¬ì— ì¦‰ì‹œ ë°˜ì˜ë˜ê³ , íŠ¸ë¦¬ì˜ êµ¬ì¡°ê°€ ë³€ê²½ëœë‹¤.
3.  CSSOM ì¬ê³„ì‚° (Recalculate CSSOM)

    > ë³€ê²½ëœ DOMì— ëŒ€í•œ CSSOMì„ ë‹¤ì‹œ ê³„ì‚°í•œë‹¤.\
    > ìŠ¤íƒ€ì¼ ê·œì¹™ì´ ì¬í‰ê°€ë˜ê³  ìŠ¤íƒ€ì¼ ì •ë³´ê°€ ì—…ë°ì´íŠ¸ ëœë‹¤.
4.  ë ˆì´ì•„ì›ƒ ì¬ê³„ì‚° (Reflow)

    > DOMì˜ ë³€ê²½ìœ¼ë¡œ ì¸í•´ ë ˆì´ì•„ì›ƒì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆëŠ” ê²½ìš°, ë ˆì´ì•„ì›ƒ ë‹¨ê³„ê°€ ì¬ì‹¤í–‰ëœë‹¤.\
    > \->DOM ìš”ì†Œì˜ í¬ê¸° ë˜ëŠ” ìœ„ì¹˜ ë³€ê²½ë  ë•Œ ë°œìƒ
5.  í˜ì¸íŒ… ì¬ìˆ˜í–‰ (Repaint)

    > ë³€ê²½ëœ ìš”ì†Œì™€ ê·¸ ì£¼ë³€ì˜ ìš”ì†Œë“¤ì€ ìƒˆë¡œ ê·¸ë ¤ì ¸ì•¼ í•œë‹¤.\
    > \->ìƒ‰ìƒ, ë°°ê²½, ê·¸ë¦¼ì ë° íˆ¬ëª…ë„ ê°™ì€ ìŠ¤íƒ€ì¼ ì†ì„±ë§Œ ë³€ê²½í•˜ë©´ Repaint ë‹¨ê³„ë§Œ ë°œìƒ
6.  í•©ì„± (Compositing)

    > í•„ìš”í•œ ê²½ìš° ë°œìƒ í•œë‹¤.

## VDOMì™€ DOMì˜ ì°¨ì´ì 

***

DOMì€ ì›¹í˜ì´ì§€ì˜ ì‹¤ì œ êµ¬ì¡°ë¥¼ ë‚˜íƒ€ë‚´ì§€ë§Œ VDOMì€ ë©”ëª¨ë¦¬ìƒ DOMì˜ ê²½ëŸ‰í™”ëœ í‘œí˜„ ì´ë‹¤.

DOMì€ ì—…ë°ì´íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ ì‹¤ì œ DOMì— ë°˜ì˜í•˜ì§€ë§Œ, `ReactëŠ” ë°°ì¹˜ ì—…ë°ì´íŠ¸ ë°©ì‹`ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ìƒíƒœë³€í™”ë¥¼ ë¹„ë™ê¸° ì²˜ë¦¬í•˜ê³ , ì—¬ëŸ¬ ë³€ê²½ ì‚¬í•­ì„ ëª¨ì•„ ë‹¨ì¼ ì—…ë°ì´íŠ¸ë¡œ ì²˜ë¦¬í•œë‹¤. ì´í›„ ê°€ìƒ DOMíŠ¸ë¦¬ê°€ ìƒì„±ë˜ê³  ì´ì „ì˜ DOMíŠ¸ë¦¬ì™€ ë¹„êµí•˜ì—¬ ë³€ê²½ëœ ë¶€ë¶„ë§Œ ì‹¤ì œ DOMì— ë™ê¸°í™”ë˜ì–´ `Reflow`ì™€`Repaint`ê³¼ì •ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆë‹¤.

> ğŸ’¡ë¦¬ì•¡íŠ¸ëŠ” ë”ë³´ë‹¤ ë¹ ë¥¸ê²Œ ì¤‘ìš”í•œê²Œ ì•„ë‹ˆë¼ ìœ ì§€ë³´ìˆ˜ê°€ ì¢‹ì€ ì•±ì´ì§€ë§Œ ì¶©ë¶„íˆ ë¹¨ë¼

## Reconciliation(ì¬ì¡°ì •) ê³¼ì • ???

***

ì–´ë–¤ ë¶€ë¶„ì„ ìƒˆë¡­ê²Œ ë Œë”ë§í•´ì•¼ í•˜ëŠ”ì§€ ê°€ìƒ DOMê³¼ ì‹¤ì œ DOMì„ ë¹„êµí•˜ëŠ” ì‘ì—…\
`render()` í•¨ìˆ˜ëŠ” `React Eelement Tree`ë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤.

> ì›ì¹™ 1. ì„œë¡œ ë‹¤ë¥¸ íƒ€ì…ì˜ ë‘ ì—˜ë¦¬ë¨¼íŠ¸ëŠ” ì„œë¡œ ë‹¤ë¥¸ íŠ¸ë¦¬ë¥¼ ë§Œë“¤ì–´ë‚¸ë‹¤.\
> ì›ì¹™ 2. ê°œë°œìê°€ key propì„ í†µí•´, ì—¬ëŸ¬ ë Œë”ë§ ì‚¬ì´ì—ì„œ ì–´ë–¤ ìì‹ ì—˜ë¦¬ë¨¼íŠ¸ê°€ ë³€ê²½ ë˜ì§€ ì•Šì•„ì•¼ í• ì§€ í‘œì‹œí•´ ì¤„ ìˆ˜ ìˆë‹¤.

### ë™ì‘ê³¼ì •

> 1. stateë‚˜ propsê°€ ë³€ê²½ë¨ì„ ê°ì§€
> 2. render() í•¨ìˆ˜ê°€ í˜¸ì¶œì´ ëœë‹¤.
> 3. ê°€ìƒDOMíŠ¸ë¦¬ë¥¼ ìƒì„±
> 4. ì´ì „ DOMì™€ ê°€ìƒ DOMì„ ë¹„êµ(diffing Algorithm)
> 5. ë³€ê²½ì´ í™•ì¸ëœ ë¶€ë¶„ì„ ì‹¤ì œ DOMì™€ ë™ê¸°í™”

**Batch Update**ê°€ í•µì‹¬\
ì‹¤ì œDOMì„ ì—¬ëŸ¬ë²ˆ ë°˜ë³µí•˜ì—¬ ì¡°ì‘í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ë³€ê²½ëœ ë‚´ìš©ì„ í•œë²ˆì— ë°˜ì˜í•œë‹¤.



***

> [Understanding Reflow and Repaint in the browser](https://dev.to/gopal1996/understanding-reflow-and-repaint-in-the-browser-1jbg)
>
> [React ê³µì‹ë¬¸ì„œì˜ JSX ì†Œê°œ](https://ko.reactjs.org/docs/introducing-jsx.html)
>
> [JSX ì´í•´í•˜ê¸°](https://ko.reactjs.org/docs/jsx-in-depth.html)
>
> [JSX ì—†ì´ ì‚¬ìš©í•˜ëŠ” Reac](https://ko.reactjs.org/docs/react-without-jsx.html)[t](https://ko.reactjs.org/docs/react-without-jsx.html)
>
> [VDOM (Virtual DOM)](https://ko.reactjs.org/docs/faq-internals.html)
>
> [ì¬ì¡°ì • (Reconciliation)](https://ko.reactjs.org/docs/reconciliation.html)\
> [Strict Mode](https://ko.reactjs.org/docs/strict-mode.html)
